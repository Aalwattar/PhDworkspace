/*
 * data.c
 *
 *  Created on: Jun 1, 2011
 *      Author: ahmed
 */
#include "xstatus.h"
#include "data.h"
/*
struct data
{ int op1;
  int op2;
  unsigned  isAdd_op1 : 1;
  unsigned  isAdd_op2: 1;
  unsigned :0 ;
};
enum Mode {SW=0x0001,HW=0x0002,Any=0x0003,CustomHW=0x0004,
	CustomHWnSW=0x0005}
struct PRRProcess
{
	int No;
	enum PRRID PRR_ID[MAX_PR_MODULES];
};

struct node {
	Xuint32 id;
	u8 operation;
	enum Mode mode;
	struct PRRProcess PRRP;
	u32 next;
	struct data D;
	int result;
	Xuint32 prio;
	Xuint32 dl;
	int Q;
};
*/

enum Operations {OpAdd,OpSub,OPMult,OpShift,OpBlank};

struct TaskType TasksTypes[MAX_TASKS_TYPES];

struct  node dfg1[]  = {

        {
                .id= 0 , .operation= OpAdd, .mode =HybHW , .next=1 ,.Done=NO,.prio=0, .Q=NO,
                .PRRP= {.No=1, .PRR_ID[0]=Math0},
                .D={.op1=1 ,.op2=5 , .isAdd_op1=NO, .isAdd_op2=NO},
                .Emu={.HWdelay=20000000LU, .SWdelay=20000000LU}
        },


        {
                .id= 1 , .operation= OpShift, .mode =HybHW , .next=3 ,.Done=NO, .prio=1,.Q=NO,
                .PRRP= {.No=1, .PRR_ID[0]=Math1},
                .D={.op1=8 ,.op2=1 , .isAdd_op1=NO, .isAdd_op2=NO},
                .Emu={.HWdelay=20000000LU, .SWdelay=20000000LU}
        },

        {
                        .id= 2 , .operation= OpSub, .mode =HybHW , .next=4 ,.Done=NO, .prio=2,.Q=NO,
                        .PRRP= {.No=1, .PRR_ID[0]=Math2},
                        .D={.op1=3 ,.op2=2 , .isAdd_op1=NO, .isAdd_op2=NO},
                        .Emu={.HWdelay=20000000LU, .SWdelay=20000000LU}
         },


        {
                .id= 3 , .operation= OPMult, .mode =HybHW , .next=4 ,.Done=NO, .prio=3,.Q=NO,
                .PRRP= {.No=1, .PRR_ID[0]=Math2},
                .D={.op1=8 ,.op2=0 , .isAdd_op1=NO, .isAdd_op2=YES},
                .Emu={.HWdelay=80000000LU, .SWdelay=80000000LU}
        },


        {
                .id= 4 , .operation= OPMult, .mode =HybHW , .next=2 ,.Done=NO,.prio=4,.Q=NO,
                .PRRP= {.No=1, .PRR_ID[0]=Math3},
                .D={.op1=5 ,.op2=1 , .isAdd_op1=NO, .isAdd_op2=YES},
                .Emu={.HWdelay=80000000LU, .SWdelay=80000000LU}
        },


        {
					.id= 5 , .operation= OpAdd, .mode =HybHW , .next=4 ,.Done=NO, .prio=5,.Q=NO,
					.PRRP= {.No=1, .PRR_ID[0]=Math2},
					.D={.op1=4 ,.op2=2 , .isAdd_op1=NO, .isAdd_op2=NO},
					.Emu={.HWdelay=20000000LU, .SWdelay=20000000LU}
        },


        {
					.id= 6 , .operation= OPMult, .mode =HybHW , .next=4 ,.Done=NO, .prio=6,.Q=NO,
					.PRRP= {.No=1, .PRR_ID[0]=Math2},
					.D={.op1=5 ,.op2=2 , .isAdd_op1=YES, .isAdd_op2=YES},
					.Emu={.HWdelay=80000000LU, .SWdelay=80000000LU}
         },

        {
                .id= 7 , .operation= OpAdd, .mode =HybHW , .next=5 ,.Done=NO,.prio=7,.Q=NO,
                .PRRP= {.No=1, .PRR_ID[0]=Math4},
                .D={.op1=3 ,.op2=4 , .isAdd_op1=YES, .isAdd_op2=YES},
                .Emu={.HWdelay=20000000LU, .SWdelay=20000000LU}
        },

        {
                .id= 8 , .operation= OPMult, .mode =HybHW , .next=5 ,.Done=NO,.prio=8,.Q=NO,
                .PRRP= {.No=1, .PRR_ID[0]=Math0},
                .D={.op1=7 ,.op2=6 , .isAdd_op1=YES, .isAdd_op2=YES},
                .Emu={.HWdelay=80000000LU, .SWdelay=80000000LU}
        },

        {
        		.id= 9 , .operation= OPMult, .mode =HybHW , .next=6 ,.Done=NO,.prio=9,.Q=NO,
        		.PRRP= {.No=1, .PRR_ID[0]=Math0},
        		.D={.op1=1 ,.op2=2 , .isAdd_op1=NO, .isAdd_op2=NO},
        		.Emu={.HWdelay=80000000LU, .SWdelay=80000000LU}
        },

        {
        		.id= 10 , .operation= OpAdd, .mode =HybHW , .next=6 ,.Done=NO,.prio=10,.Q=NO,
        		.PRRP= {.No=1, .PRR_ID[0]=Math0},
        		.D={.op1=2 ,.op2=3 , .isAdd_op1=NO, .isAdd_op2=NO},
        		.Emu={.HWdelay=20000000LU, .SWdelay=20000000LU}
        },
        {
        		.id= 11 , .operation= OpSub, .mode =HybHW , .next=4 ,.Done=NO,.prio=11,.Q=NO,
        		.PRRP= {.No=1, .PRR_ID[0]=Math0},
        		.D={.op1=5 ,.op2=2 , .isAdd_op1=NO, .isAdd_op2=NO},
        	    .Emu={.HWdelay=20000000LU, .SWdelay=20000000LU}
        },
        {
        		.id= 12 , .operation= OpAdd, .mode =HybHW , .next=5 ,.Done=NO,.prio=12,.Q=NO,
        		.PRRP= {.No=1, .PRR_ID[0]=Math0},
        		.D={.op1=9 ,.op2=10 , .isAdd_op1=YES, .isAdd_op2=YES},
        		.Emu={.HWdelay=20000000LU, .SWdelay=20000000LU}
        },
        {
        		.id= 13 , .operation= OPMult, .mode =HybHW , .next=5 ,.Done=NO,.prio=13,.Q=NO,
        		.PRRP= {.No=1, .PRR_ID[0]=Math0},
        		.D={.op1=4 ,.op2=11 , .isAdd_op1=NO, .isAdd_op2=YES},
        		.Emu={.HWdelay=80000000LU, .SWdelay=80000000LU}
        },
        {
        		.id= 14 , .operation= OpAdd, .mode =HybHW , .next=4 ,.Done=NO,.prio=14,.Q=NO,
        		.PRRP= {.No=1, .PRR_ID[0]=Math0},
        		.D={.op1=8 ,.op2=12 , .isAdd_op1=YES, .isAdd_op2=YES},
        		.Emu={.HWdelay=20000000LU, .SWdelay=20000000LU}
        },
        {
        		.id= 15 , .operation= OPMult, .mode =HybHW , .next=4 ,.Done=NO,.prio=15,.Q=NO,
        		.PRRP= {.No=1, .PRR_ID[0]=Math0},
        		.D={.op1=5 ,.op2=13 , .isAdd_op1=NO, .isAdd_op2=YES},
        		.Emu={.HWdelay=80000000LU, .SWdelay=80000000LU}
        },
        {
        		.id= 16 , .operation= OpAdd, .mode =HybHW , .next=0 ,.Done=NO,.prio=16,.Q=NO,
        		.PRRP= {.No=1, .PRR_ID[0]=Math0},
        		.D={.op1=14 ,.op2=15 , .isAdd_op1=YES, .isAdd_op2=YES},
        		.Emu={.HWdelay=20000000LU, .SWdelay=20000000LU}
        }


};

//
//struct  node dfg1[]  = {
//
//        {
//                .id= 0 , .operation= OpAdd, .mode =HybHW , .next=1 ,.Done=NO,.prio=0, .Q=NO,
//                .PRRP= {.No=1, .PRR_ID[0]=Math0},
//                .D={.op1=1 ,.op2=5 , .isAdd_op1=NO, .isAdd_op2=NO}
//        },
//
//
//        {
//                .id= 1 , .operation= OpAdd, .mode =HybHW , .next=3 ,.Done=NO, .prio=1,.Q=NO,
//                .PRRP= {.No=1, .PRR_ID[0]=Math1},
//                .D={.op1=8 ,.op2=1 , .isAdd_op1=NO, .isAdd_op2=NO}
//        },
//
//        {
//                        .id= 2 , .operation= OpAdd, .mode =HybHW , .next=4 ,.Done=NO, .prio=2,.Q=NO,
//                        .PRRP= {.No=1, .PRR_ID[0]=Math2},
//                        .D={.op1=3 ,.op2=2 , .isAdd_op1=NO, .isAdd_op2=NO}
//         },
//
//
//        {
//                .id= 3 , .operation= OpAdd, .mode =HybHW , .next=4 ,.Done=NO, .prio=3,.Q=NO,
//                .PRRP= {.No=1, .PRR_ID[0]=Math2},
//                .D={.op1=8 ,.op2=0 , .isAdd_op1=NO, .isAdd_op2=YES}
//        },
//
//
//        {
//                .id= 4 , .operation= OpAdd, .mode =HybHW , .next=2 ,.Done=NO,.prio=4,.Q=NO,
//                .PRRP= {.No=1, .PRR_ID[0]=Math3},
//                .D={.op1=5 ,.op2=1 , .isAdd_op1=NO, .isAdd_op2=YES}
//        },
//
//
//        {
//					.id= 5 , .operation= OpAdd, .mode =HybHW , .next=4 ,.Done=NO, .prio=5,.Q=NO,
//					.PRRP= {.No=1, .PRR_ID[0]=Math2},
//					.D={.op1=4 ,.op2=2 , .isAdd_op1=NO, .isAdd_op2=NO}
//        },
//
//
//        {
//					.id= 6 , .operation= OpAdd, .mode =HybHW , .next=4 ,.Done=NO, .prio=6,.Q=NO,
//					.PRRP= {.No=1, .PRR_ID[0]=Math2},
//					.D={.op1=5 ,.op2=2 , .isAdd_op1=YES, .isAdd_op2=YES}
//         },
//
//        {
//                .id= 7 , .operation= OpAdd, .mode =HybHW , .next=5 ,.Done=NO,.prio=7,.Q=NO,
//                .PRRP= {.No=1, .PRR_ID[0]=Math4},
//                .D={.op1=3 ,.op2=4 , .isAdd_op1=YES, .isAdd_op2=YES}
//        },
//
//        {
//                .id= 8 , .operation= OpAdd, .mode =HybHW , .next=5 ,.Done=NO,.prio=8,.Q=NO,
//                .PRRP= {.No=1, .PRR_ID[0]=Math0},
//                .D={.op1=7 ,.op2=6 , .isAdd_op1=YES, .isAdd_op2=YES}
//        },
//
//        {
//        		.id= 9 , .operation= OpAdd, .mode =HybHW , .next=6 ,.Done=NO,.prio=9,.Q=NO,
//        		.PRRP= {.No=1, .PRR_ID[0]=Math0},
//        		.D={.op1=1 ,.op2=2 , .isAdd_op1=NO, .isAdd_op2=NO}
//        },
//
//        {
//        		.id= 10 , .operation= OpAdd, .mode =HybHW , .next=6 ,.Done=NO,.prio=10,.Q=NO,
//        		.PRRP= {.No=1, .PRR_ID[0]=Math0},
//        		.D={.op1=2 ,.op2=3 , .isAdd_op1=NO, .isAdd_op2=NO}
//        },
//        {
//        		.id= 11 , .operation= OpAdd, .mode =HybHW , .next=4 ,.Done=NO,.prio=11,.Q=NO,
//        		.PRRP= {.No=1, .PRR_ID[0]=Math0},
//        		.D={.op1=5 ,.op2=2 , .isAdd_op1=NO, .isAdd_op2=NO}
//        },
//        {
//        		.id= 12 , .operation= OpAdd, .mode =HybHW , .next=5 ,.Done=NO,.prio=12,.Q=NO,
//        		.PRRP= {.No=1, .PRR_ID[0]=Math0},
//        		.D={.op1=9 ,.op2=10 , .isAdd_op1=YES, .isAdd_op2=YES}
//        },
//        {
//        		.id= 13 , .operation= OpAdd, .mode =HybHW , .next=5 ,.Done=NO,.prio=13,.Q=NO,
//        		.PRRP= {.No=1, .PRR_ID[0]=Math0},
//        		.D={.op1=4 ,.op2=11 , .isAdd_op1=NO, .isAdd_op2=YES}
//        },
//        {
//        		.id= 14 , .operation= OpAdd, .mode =HybHW , .next=4 ,.Done=NO,.prio=14,.Q=NO,
//        		.PRRP= {.No=1, .PRR_ID[0]=Math0},
//        		.D={.op1=8 ,.op2=12 , .isAdd_op1=YES, .isAdd_op2=YES}
//        },
//        {
//        		.id= 15 , .operation= OpAdd, .mode =HybHW , .next=4 ,.Done=NO,.prio=15,.Q=NO,
//        		.PRRP= {.No=1, .PRR_ID[0]=Math0},
//        		.D={.op1=5 ,.op2=13 , .isAdd_op1=NO, .isAdd_op2=YES}
//        },
//        {
//        		.id= 16 , .operation= OpAdd, .mode =HybHW , .next=0 ,.Done=NO,.prio=16,.Q=NO,
//        		.PRRP= {.No=1, .PRR_ID[0]=Math0},
//        		.D={.op1=14 ,.op2=15 , .isAdd_op1=YES, .isAdd_op2=YES}
//        }
//
//
//};
//struct TaskType{
//	int ID;
//	char * name;
//	int SWET;
//	int HWET;
//	int SWPriority;
//	int ConfigTime[MAX_PR_MODULES];
//	Xuint32 CanRun;
//
//};

//enum SystemStates {Start,CfgDone,TaskDone};
void Init_TasksTypes(void)
{
	int i,k;
	for (i =0;i<MAX_TASKS_TYPES;i++)
	{
		TasksTypes[i].ID=i;
		TasksTypes[i].name=NULL;
		TasksTypes[i].SWET=0;
		TasksTypes[i].HWET=0;
		TasksTypes[i].SWPriority=AVAILABLE_PRR+1;
		for (k=0;k<MAX_PR_MODULES;k++)
		{
			TasksTypes[i].ConfigTime[k]=0;
		}
		TasksTypes[i].CanRun=0XFF;


	}
}
  enum SystemStates State=Start;


//  __attribute__ ((aligned (4))){0,0,1,1,{1,5,0,0},0},{1,3,1,3,{8,1,0,0},0},{2,2,1,4,{8,0,0,1},0} ,{3,2,0,2,{5,1,0,1},0},{4,0,0,0,{3,2,1,1},0}};
